<div class="container mt-5 mb-3">
  <div class="card shadow-lg border-0 rounded-3">

    <!-- Card Header -->
    <div class="card-header bg-dark text-white text-center py-3">
      <h3 class="mb-0"> Update Product</h3>
    </div>

    <div class="card-body p-4 bg-light">
      @if (isLoading) {
        <!-- Loading State -->
        <div class="text-center my-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-2 text-muted">Loading product data...</p>
        </div>
      } @else {
        <!-- Update Product Form -->
        <form [formGroup]="updateForm" (ngSubmit)="onSubmit()">

          <!-- Product Name -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Product Name</label>
            <input formControlName="name" class="form-control" type="text" placeholder="Enter product name" />
            @if (updateForm.get('name')?.invalid && updateForm.get('name')?.touched) {
              <small class="text-danger">Product name is required</small>
            }
          </div>

          <!-- Image URL -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Image URL</label>
            <input formControlName="image" class="form-control" type="text" placeholder="https://example.com/image.jpg" />
            @if (updateForm.get('image')?.invalid && updateForm.get('image')?.touched) {
              <small class="text-danger">Image URL is required</small>
            }
          </div>

          <!-- Price -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Price ($)</label>
            <input formControlName="price" class="form-control" type="number" placeholder="Enter product price" />
            @if (updateForm.get('price')?.invalid && updateForm.get('price')?.touched) {
              <small class="text-danger">Valid price is required</small>
            }
          </div>

          <!-- Description -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Description</label>
            <textarea formControlName="description" class="form-control" rows="3" placeholder="Enter product description"></textarea>
            @if (updateForm.get('description')?.invalid && updateForm.get('description')?.touched) {
              <small class="text-danger">Description is required</small>
            }
          </div>

          <!-- Stock -->
          <div class="mb-3">
            <label class="form-label fw-semibold">Stock</label>
            <input formControlName="stock" class="form-control" type="number" placeholder="Available quantity" />
            @if (updateForm.get('stock')?.invalid && updateForm.get('stock')?.touched) {
              <small class="text-danger">Valid stock quantity is required</small>
            }
          </div>

          <!-- Error Message -->
          @if (errorMsg) {
            <div class="alert alert-danger text-center fw-semibold mt-3">{{ errorMsg }}</div>
          }

          <!-- Buttons -->
          <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-danger px-4" (click)="onCancel()">
               Cancel
            </button>
            <button type="submit" class="btn btn-primary text-dark px-4" [disabled]="isLoading">
              @if (isLoading) {
                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                Updating...
              } @else {
                 Update Product
              }
            </button>
          </div>
        </form>
      }
    </div>
  </div>
</div>
